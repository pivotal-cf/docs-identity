---
title: Configuring a Single Sign-On Service Provider
owner: Identity Service
---

This topic describes how to add an external identity provider to your Pivotal Single Sign-On (SSO) service plan.

##<a id='set-up-saml'></a> Step 1: Setting up SAML

1. Log in to the SSO Operator Dashboard at `https://p-identity.YOUR-SYSTEM-DOMAIN` as a Plan Administrator.

2. Select your plan and click **Manage Identity Providers** on the drop-down menu.

	<%= image_tag '../images/azure_manage_id_providers.png' %>

3. Click **New Identity Provider** to create a new identity provider.

	<%= image_tag '../images/new_id_provider.png' %>

2. To create a new identity provider, do the following:
	1. Enter an **Identity Provider Name**.
	2. (Optional) Enter an **Identity Provider Description**.
	3. Enter the **App Federation Metadata Url** you obtained from step 7 in [Step 2: Set up SAML in Azure Active Directory (AD)](./config-azure.html#azure) and click **Fetch Metadata**.
	4. (Optional) Enter mappings under **Advanced SAML Settings** > **Attribute Mappings**.

1. Click **Create Identity Provider**.

##<a id='config-permissions'></a> Step 2: Configure Group Permissions

<p class="note"><strong>Note:</strong>  Azure AD will pass the Object ID of the groups recorded in
	step 5 of <a href="./config-azure.html#claims">Step 3: Set up Claims Mapping</a> to the SSO plan.</p>

1. Add groups to be propagated from the external identity provider to the ID token by following these steps:
	1. Log in to the SSO Operator Dashboard at `https://p-identity.YOUR-SYSTEM-DOMAIN` as a Plan Administrator.
	2. Select your plan and click **Manage Identity Providers** on the drop-down menu.
	3. Click **Group Whitelist** next to your identity provider.
	4. Enter the group names.
	5. Click **Save Group Whitelist**.

2. Map the groups to resources defined in the SSO service by following these steps:
	1. Log in to the SSO Operator Dashboard at `https://p-identity.YOUR-SYSTEM-DOMAIN` as a Plan Administrator.
	2. Select your plan and click **Manage Identity Providers** on the drop-down menu.
	3. Click **Resource Permissions**.
	4. Click **New Permissions Mapping** and perform the following steps:
    	1. Enter a **Group Name**.
    	2. For **Select Permissions**, select the permissions that the members of the group from the external identity provider should have access to.
		3. Click **Save Permissions Mapping**.
