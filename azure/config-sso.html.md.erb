---
title: Configure a Single Sign-On Service Provider
owner: Identity Service
---

This topic describes how to add an external identity provider to your Pivotal Single Sign-On (SSO) service plan.

##<a id='configure-metadata'></a> Configure Identity Provider Metadata

1. Edit the Identity Provider Metadata file which is typically named `saml2-metadata-idp.xml`.

- The Single Sign-On service requires that the Name ID Format is specified. Replace the following text: `<saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic" Name="PingOne.idpid" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"/>` with: `<saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:basic" Name="PingOne.idpid" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"/>
<md:NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</md:NameIDFormat>`


##<a id='set-up-saml'></a> Setting up SAML 

1. Log into the SSO dashboard at `https://p-identity.YOUR-SYSTEM-DOMAIN` as a Plan Administrator. 

2. Select your plan and click **Manage Identity Providers** on the dropdown menu.

	<%= image_tag '../images/pingone_manage_id_providers.png' %>

3. Click **New Identity Provider** to create a new identity provider.

	<%= image_tag '../images/new_id_provider.png' %>

2. To create a new identity provider, perform the following steps:
	1. Enter an identity provider name into **Identity Provider Name**.
	2. (Optional) Enter a description into **Identity Provider Description**.
	3. Click **SAML File Metadata (optional)** follwed by clicking the **Upload Identity Provider Metadata** button to upload your metadata XML.
	4. (Optional) Under **Advanced SAML Settings**, click **Attribute Mappings** to enter the mappings.

1. Click **Create Identity Provider**.

1. Click **Resource Permissions**.

2. Click **New Permissions Mapping** and perform the following steps:
    1. Enter a **Group Name**.
    2. For **Select Permissions**, select the permissions that the members of the group from the external identity provider should have access to.

3. Navigate to the identity provider list.

4. Click **Group Whitelist** and enter the group names from the external identity provider that should be propagated in the ID token.
